<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wild Rift ‚Äì Champion Stats</title>
  <style>
    :root{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    body{margin:0;background:#0b0f17;color:#e8edf7}
    .wrap{max-width:1200px;margin:0 auto;padding:16px}
    h1{margin:0 0 12px;font-size:20px}

    .card{background:#121a2a;border:1px solid #22304a;border-radius:12px;padding:12px}
    .small{font-size:12px;opacity:.75;margin-top:10px}

    /* ====== Level slider ====== */
    .levelBar{margin:12px 0;padding:12px;background:#121a2a;border:1px solid #22304a;border-radius:12px}
    .levelHead{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .levelTitle{font-size:12px;opacity:.85}
    .levelNum{font-size:12px;opacity:.9;font-weight:700}
    #level{width:100%}

    /* ====== Table ====== */
    .tableWrap{
      margin-top:12px;
      overflow-y:auto;
      overflow-x:hidden; /* –ø—Ä–æ—Å–∏–ª–∏ –±–µ–∑ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ */
      border-radius:12px;
      border:1px solid #22304a;
      max-height:72vh;
    }
    table{width:100%;border-collapse:collapse;table-layout:fixed}
    th,td{
      padding:8px 10px;
      border-bottom:1px solid rgba(34,48,74,.65);
      border-right:1px solid rgba(34,48,74,.55);
      text-align:center;
      vertical-align:middle;
      font-size:13px;
      word-break:break-word;
    }
    th:last-child,td:last-child{border-right:none}
    th{
      position:sticky;top:0;background:#121a2a;
      cursor:pointer;user-select:none;z-index:2
    }
    /* sticky champion col to avoid left-right scrolling pain */
    th:first-child, td:first-child{
      position:sticky;left:0;z-index:3;
      background:#121a2a;
    }
    tbody tr:hover{background:rgba(180,60,60,.12);box-shadow:inset 0 0 0 2px rgba(200,70,70,.6)}
    tbody tr:hover td{color:#fff;font-weight:800}
    tbody tr:hover td:first-child{color:#ff6b6b}

    /* champion cell with X */
    .champ-cell{display:flex;align-items:center;justify-content:center;gap:8px}
    .champ-name{display:inline-block;max-width:180px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
    .champ-x{
      width:22px;height:22px;border-radius:8px;
      border:1px solid rgba(34,48,74,.9);
      background:rgba(11,15,23,.55);
      color:rgba(232,237,247,.85);
      cursor:pointer;font-weight:800;line-height:1;
      display:inline-flex;align-items:center;justify-content:center;
      transition:transform .12s ease,border-color .12s ease,color .12s ease;
    }
    .champ-x:hover{transform:scale(1.05);border-color:rgba(255,107,107,.75);color:#ff6b6b}

    /* tiers */
    .tier-top{background:#7b5cff!important;color:#fff}
    .tier-mid{background:rgba(138,147,166,.12)!important;color:#e8edf7}
    .tier-low{background:rgba(255,77,79,.18)!important;color:#fff}

    /* Mana=0 */
    .mana-zero{position:relative;background:rgba(90,100,120,.25)!important;color:#cfd6e4;font-weight:900;overflow:hidden}
    .mana-zero::after{
      content:"";position:absolute;inset:-60%;
      background:radial-gradient(circle,rgba(142,177,248,.35),rgba(67,74,87,.299));
      animation:zeroPulse 3.2s ease-in-out infinite;
    }
    .mana-zero>span{position:relative;z-index:1}
    @keyframes zeroPulse{0%{transform:scale(.9);opacity:.35}50%{transform:scale(1.05);opacity:.65}100%{transform:scale(.9);opacity:.35}}

    /* Energy */
    .energy{position:relative;background:rgba(255,159,28,.22)!important;color:#0b0f17;font-weight:900;overflow:hidden}
    .energy::after{content:"";position:absolute;inset:-40%;background:radial-gradient(circle,rgba(255,159,28,.55),rgba(255,159,28,0));animation:energyPulse 1.6s ease-in-out infinite}
    .energy>span{position:relative;z-index:1}
    @keyframes energyPulse{0%{transform:scale(.85);opacity:.55}50%{transform:scale(1.15);opacity:.95}100%{transform:scale(.85);opacity:.55}}

    /* Tooltip */
    td.has-tip{position:relative}
    td.has-tip::after{
      content:attr(data-tip);
      position:absolute;left:50%;bottom:calc(100% + 8px);
      transform:translateX(-50%);
      background:rgba(15,21,36,.96);border:1px solid #22304a;color:#d6deee;
      padding:6px 8px;border-radius:8px;font-size:11px;font-weight:400;line-height:1.35;
      white-space:nowrap;pointer-events:none;opacity:0;transition:opacity 120ms ease,transform 120ms ease;z-index:50;
    }
    td.has-tip::before{
      content:"";position:absolute;left:50%;bottom:calc(100% + 2px);transform:translateX(-50%);
      border:6px solid transparent;border-top-color:#22304a;opacity:0;transition:opacity 120ms ease;z-index:50;
    }
    td.has-tip:hover::after,td.has-tip:hover::before{opacity:1}
    td.has-tip:hover::after{transform:translateX(-50%) translateY(-2px)}
    td.energy.has-tip::after,td.energy.has-tip::before{display:none!important}

    /* ====== Header brand ====== */
    .brand{display:flex;align-items:center;gap:12px;margin-bottom:8px;flex-wrap:wrap}
    .nick{font-size:22px;font-weight:800;letter-spacing:1px;color:#7b5cff;animation:glow 2.5s ease-in-out infinite}
    .dot{opacity:.6}
    .tag{font-size:12px;opacity:.7;border-left:1px solid #22304a;padding-left:12px}
    @keyframes glow{0%{text-shadow:0 0 4px #7b5cff44}50%{text-shadow:0 0 12px #7b5cffcc}100%{text-shadow:0 0 4px #7b5cff44}}
    .twitch{font-size:14px;font-weight:700;color:#9146ff;text-decoration:none;animation:pulse 3s ease-in-out infinite}
    .twitch:hover{text-decoration:underline;opacity:1}
    @keyframes pulse{0%{opacity:.6}50%{opacity:1}100%{opacity:.6}}

    .support{margin-top:14px;padding:14px;border:1px solid #22304a;border-radius:12px;background:#121a2a;display:grid;gap:12px}
    .supportBody{font-size:13px;line-height:1.4;opacity:.9}
    .donateBtn{
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      padding:10px 12px;border-radius:12px;text-decoration:none;color:#fff;
      background:linear-gradient(90deg,#9146ff,#7b5cff);
      border:1px solid #2a3a5a;font-weight:800;
      position:relative;overflow:hidden;animation:donatePulse 2.2s ease-in-out infinite;
    }
    .donateBtn::before{content:"";position:absolute;top:-40%;left:-60%;width:60%;height:180%;background:rgba(255,255,255,.22);transform:rotate(20deg);animation:donateShine 2.8s ease-in-out infinite}
    @keyframes donatePulse{0%{box-shadow:0 0 0 rgba(145,70,255,0)}50%{box-shadow:0 0 18px rgba(145,70,255,.35)}100%{box-shadow:0 0 0 rgba(145,70,255,0)}}
    @keyframes donateShine{0%{transform:translateX(-120%) rotate(20deg);opacity:0}15%{opacity:1}45%{transform:translateX(220%) rotate(20deg);opacity:0}100%{transform:translateX(220%) rotate(20deg);opacity:0}}

    /* ====== Modal ====== */
    .modal.hidden{display:none}
    .modal{position:fixed;inset:0;z-index:9999}
    .modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.55);backdrop-filter:blur(2px)}
    .modal-card{
      position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);
      width:min(1100px,92vw);height:min(80vh,720px);
      background:#121a2a;border:1px solid #22304a;border-radius:14px;
      box-shadow:0 20px 60px rgba(0,0,0,.5);
      display:flex;flex-direction:column;overflow:hidden
    }
    .modal-head{
      padding:10px 12px;border-bottom:1px solid #22304a;
      display:flex;align-items:center;justify-content:space-between;gap:10px
    }
    .modal-title{font-weight:900;letter-spacing:.3px}
    .modal-actions{display:flex;align-items:center;gap:8px;flex-wrap:wrap;justify-content:flex-end}
    .mini-btn{
      padding:6px 10px;border-radius:12px;border:1px solid rgba(34,48,74,.9);
      background:rgba(11,15,23,.55);color:rgba(232,237,247,.92);
      cursor:pointer;font-size:12px;font-weight:800;
    }
    .mini-btn:hover{border-color:rgba(123,92,255,.75);color:#fff}
    .modal-search{
      width:220px;max-width:45vw;
      padding:8px 10px;border-radius:12px;border:1px solid #22304a;
      background:#0b0f17;color:#e8edf7
    }
    .modal-grid{
      padding:12px;
      display:grid;
      grid-template-columns:repeat(5,minmax(0,1fr));
      gap:10px;
      overflow:auto
    }
    .role-col{border:1px solid rgba(34,48,74,.75);border-radius:12px;background:rgba(11,15,23,.35);overflow:hidden;display:flex;flex-direction:column;min-width:0}
    .role-head{
      display:flex;align-items:center;justify-content:center;
      padding:10px 8px;border-bottom:1px solid rgba(34,48,74,.65);
      background:rgba(18,26,42,.85);cursor:pointer
    }
    .role-head img{width:26px;height:26px;object-fit:contain}
    .role-body{padding:10px;display:flex;flex-direction:column;gap:8px;overflow:auto}
    .champ-btn{
      width:100%;
      padding:8px 10px;border-radius:12px;
      border:1px solid rgba(34,48,74,.8);
      background:rgba(11,15,23,.65);
      color:rgba(232,237,247,.92);
      cursor:pointer;text-align:center;font-weight:800;
      white-space:nowrap;overflow:hidden;text-overflow:ellipsis;
      transition:transform 120ms ease,border-color 120ms ease;
    }
    .champ-btn:hover{transform:translateY(-1px);border-color:rgba(123,92,255,.7)}
    .champ-btn.selected{background:rgba(123,92,255,.25);border-color:rgba(123,92,255,.85);color:#fff}

    /* Close X (top-right between modal and backdrop) */
    .modal-x{
      position:absolute;top:14px;right:14px;z-index:10001;
      width:40px;height:40px;border-radius:14px;
      border:1px solid rgba(34,48,74,.95);
      background:rgba(11,15,23,.75);color:#fff;
      font-size:18px;font-weight:900;cursor:pointer;
      display:flex;align-items:center;justify-content:center;
    }
    .modal-x:hover{border-color:rgba(255,107,107,.75);color:#ff6b6b}

    @media (max-width:600px){
      .wrap{padding:8px}
      h1{font-size:16px}
      th,td{padding:6px 6px;font-size:11px}
      .champ-name{max-width:90px}
      .modal-card{width:96vw;height:86vh}
      .modal-grid{gap:6px}
      .role-head{padding:8px 6px}
      .role-head img{width:22px;height:22px}
      .role-body{padding:8px;gap:6px}
      .champ-btn{padding:6px 6px;border-radius:10px;font-size:11px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="brand">
      <span class="nick">ERjanKG</span>
      <span class="dot">¬∑</span>
      <a class="twitch" href="https://www.twitch.tv/ERjanKG" target="_blank" rel="noopener">Twitch</a>
      <span class="tag">Wild Rift Stats</span>
    </div>

    <div class="support">
      <div class="supportBody">
        –†–µ–±—è—Ç–∞, —Å–∞–π—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ –±–µ—Å–ø–ª–∞—Ç–µ–Ω –¥–ª—è –≤—Å–µ—Ö. –ù–æ –±—É–¥—É –æ—á–µ–Ω—å –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É ‚Äî —ç—Ç–æ –º–æ—Ç–∏–≤–∞—Ü–∏—è —Ä–∞–∑–≤–∏–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç.
        –í –ø–ª–∞–Ω–∞—Ö: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ–º–ø–æ–≤, winrate/pickrate –∏ —Ç–∞–±–ª–∏—Ü–∞ –≥–∞–Ω–≥-–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞ –ª–µ—Å–Ω–∏–∫–æ–≤ (—Ç–∞–π–º–∏–Ω–≥–∏ —Ñ—É–ª–ª-–∫–ª–∏—Ä–∞ –∏ —Ç.–¥.).
      </div>
      <a class="donateBtn" href="https://www.donationalerts.com/r/erjankg" target="_blank" rel="noopener">üíú –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</a>
    </div>

    <h1>Champion Stats (by Level)</h1>

    <div class="levelBar">
      <div class="levelHead">
        <div class="levelTitle">Level</div>
        <div class="levelNum"><span id="levelVal">10</span>/15</div>
      </div>
      <input id="level" type="range" min="1" max="15" value="10" />
    </div>

    <div class="tableWrap">
      <table>
        <thead id="thead"></thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>

    <div class="small">Data source: Google Sheets (published TSV)</div>
  </div>

  <!-- Champion picker modal -->
  <div id="champModal" class="modal hidden" aria-hidden="true">
    <div class="modal-backdrop" id="champModalBackdrop"></div>
    <button class="modal-x" id="champModalX" type="button" aria-label="Close">√ó</button>

    <div class="modal-card" role="dialog" aria-modal="true">
      <div class="modal-head">
        <div class="modal-title">Choose Champions</div>
        <div class="modal-actions">
          <input id="champModalSearch" class="modal-search" type="text" placeholder="Search..." />
          <button id="champModalSelectAll" class="mini-btn" type="button">Select all</button>
          <button id="champModalClearAll" class="mini-btn" type="button">Clear all</button>
        </div>
      </div>
      <div id="champModalGrid" class="modal-grid"></div>
    </div>
  </div>

<script>
  const TSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQnqVwUluQiuho1Wj6A3tZRvDJsLlyAZYmg0soWy4EJ_Un00P8e3Y2EAo3Iv6KvMm5HPwce_0AnzPfb/pub?gid=0&single=true&output=tsv";

  const COLS = [
    { key: "ad",    label: "AD",    decimals: 0 },
    { key: "hp",    label: "HP",    decimals: 0 },
    { key: "mana",  label: "Mana",  decimals: 0 },
    { key: "armor", label: "Armor", decimals: 0 },
    { key: "mr",    label: "MR",    decimals: 0 },
  ];

  const rolesList = [
    { key: "Top",     icon: "assets/roles/top.png" },
    { key: "Jungle",  icon: "assets/roles/jungle.png" },
    { key: "Mid",     icon: "assets/roles/mid.png" },
    { key: "ADC",     icon: "assets/roles/adc.png" },
    { key: "Support", icon: "assets/roles/support.png" },
  ];

  let raw = [];
  let selected = new Set();
  let level = 10;
  let sortKey = "ad";
  let sortDir = "desc";

  const levelEl = document.getElementById("level");
  const levelValEl = document.getElementById("levelVal");
  const theadEl = document.getElementById("thead");
  const tbodyEl = document.getElementById("tbody");

  const champModalEl = document.getElementById("champModal");
  const champModalBackdropEl = document.getElementById("champModalBackdrop");
  const champModalXEl = document.getElementById("champModalX");
  const champModalGridEl = document.getElementById("champModalGrid");
  const champModalSearchEl = document.getElementById("champModalSearch");
  const champModalSelectAllEl = document.getElementById("champModalSelectAll");
  const champModalClearAllEl = document.getElementById("champModalClearAll");

  function calc(base, growth, lvl){ return base + (lvl - 1) * growth; }
  function fmt(x, decimals){ return x.toLocaleString(undefined, { maximumFractionDigits: decimals }); }

  function parseTSV(text){
    const lines = text.trim().split(/\r?\n/);
    const headers = lines[0].split("\t").map(s => s.trim());
    const rows = [];
    for (let i = 1; i < lines.length; i++){
      const parts = lines[i].split("\t").map(s => s.trim());
      const obj = {};
      headers.forEach((h, idx) => obj[h] = parts[idx] ?? "");
      rows.push(obj);
    }
    return rows;
  }

  function toNum(s){
    const t = String(s).replace(/\s/g, "").replace(",", ".");
    const n = Number(t);
    return Number.isFinite(n) ? n : 0;
  }

  function quantile(sortedArr, q){
    if (!sortedArr.length) return null;
    const pos = (sortedArr.length - 1) * q;
    const base = Math.floor(pos);
    const rest = pos - base;
    if (sortedArr[base + 1] === undefined) return sortedArr[base];
    return sortedArr[base] + rest * (sortedArr[base + 1] - sortedArr[base]);
  }

  function buildHeader(){
    const tr = document.createElement("tr");

    const thC = document.createElement("th");
    thC.textContent = "Champion";
    thC.title = "Click to choose champions";
    thC.onclick = () => openChampModal();
    tr.appendChild(thC);

    COLS.forEach(c => {
      const th = document.createElement("th");
      th.textContent = c.label + (sortKey === c.key ? (sortDir==="desc"?" ‚Üì":" ‚Üë") : "");
      th.onclick = () => toggleSort(c.key);
      tr.appendChild(th);
    });

    theadEl.innerHTML = "";
    theadEl.appendChild(tr);
  }

  function toggleSort(key){
    if (sortKey === key) sortDir = (sortDir === "desc") ? "asc" : "desc";
    else { sortKey = key; sortDir = "desc"; }
    render();
  }

  function computeRows(){
    const list = raw
      .filter(r => selected.has(r.champion))
      .map(r => {
        const out = { champion: r.champion, resource: r.resource, growth: {} };
        COLS.forEach(c => {
          out[c.key] = calc(r[c.key + "_base"], r[c.key + "_growth"], level);
          out.growth[c.key] = r[c.key + "_growth"];
        });
        return out;
      });

    list.sort((a, b) => {
      const dir = sortDir === "desc" ? -1 : 1;
      if (sortKey === "champion") return a.champion.localeCompare(b.champion) * dir;
      const av = a[sortKey], bv = b[sortKey];
      if (av === bv) return a.champion.localeCompare(b.champion);
      return (av < bv ? -1 : 1) * dir;
    });

    return list;
  }

  function renderBody(rows){
    const thresholds = {};
    for (const c of COLS){
      const vals = rows
        .map(r => r[c.key])
        .filter(v => Number.isFinite(v))
        .filter(v => (c.key === "mana" ? v !== 0 : true))
        .sort((a,b) => a - b);
      if (vals.length < 3) continue;
      thresholds[c.key] = { q10: quantile(vals, 0.1), q90: quantile(vals, 0.9) };
    }

    tbodyEl.innerHTML = "";
    rows.forEach(r => {
      const tr = document.createElement("tr");

      const tdC = document.createElement("td");
      const wrap = document.createElement("div");
      wrap.className = "champ-cell";

      const name = document.createElement("span");
      name.className = "champ-name";
      name.textContent = r.champion;

      const xbtn = document.createElement("button");
      xbtn.className = "champ-x";
      xbtn.type = "button";
      xbtn.textContent = "√ó";
      xbtn.title = "Remove champion";
      xbtn.onclick = (e) => { e.stopPropagation(); selected.delete(r.champion); render(); };

      wrap.appendChild(name);
      wrap.appendChild(xbtn);
      tdC.appendChild(wrap);
      tr.appendChild(tdC);

      COLS.forEach(c => {
        const td = document.createElement("td");
        const val = r[c.key];

        if (c.key === "mana" && r.resource === "Energy"){
          td.innerHTML = "<span>ENERGY</span>";
          td.classList.add("energy");
          tr.appendChild(td);
          return;
        }
        if (c.key === "mana" && val === 0){
          td.innerHTML = "<span>0</span>";
          td.classList.add("mana-zero");
          tr.appendChild(td);
          return;
        }

        td.textContent = fmt(val, c.decimals);
        td.classList.add("has-tip");
        td.dataset.tip = `${c.label} growth per lvl: ${r.growth[c.key]}`;

        const t = thresholds[c.key];
        if (t && Number.isFinite(val)){
          if (val >= t.q90) td.classList.add("tier-top");
          else if (val < t.q10) td.classList.add("tier-low");
          else td.classList.add("tier-mid");
        }

        tr.appendChild(td);
      });

      tbodyEl.appendChild(tr);
    });
  }

  function render(){
    buildHeader();
    const rows = computeRows();
    renderBody(rows);
  }

  function openChampModal(){
    champModalEl.classList.remove("hidden");
    champModalEl.setAttribute("aria-hidden","false");
    champModalSearchEl.value = "";
    renderChampModal("");
  }

  function closeChampModal(){
    champModalEl.classList.add("hidden");
    champModalEl.setAttribute("aria-hidden","true");
  }

  function champsInRole(roleKey){
    return raw
      .filter(r => r.roles && r.roles[roleKey])
      .map(r => r.champion)
      .sort((a,b) => a.localeCompare(b));
  }

  function renderChampModal(q){
    const query = (q || "").trim().toLowerCase();
    champModalGridEl.innerHTML = "";

    rolesList.forEach(role => {
      const col = document.createElement("div");
      col.className = "role-col";

      const head = document.createElement("div");
      head.className = "role-head";
      head.title = "Click: select/unselect all in this role";

      const img = document.createElement("img");
      img.src = role.icon;
      img.alt = role.key;

      head.appendChild(img);

      const body = document.createElement("div");
      body.className = "role-body";

      const champsAll = champsInRole(role.key);
      const champsFiltered = champsAll.filter(n => n.toLowerCase().includes(query));
      const allSelected = champsAll.length > 0 && champsAll.every(n => selected.has(n));

      head.style.cursor = "pointer";
      head.onclick = () => {
        if (allSelected) champsAll.forEach(n => selected.delete(n));
        else champsAll.forEach(n => selected.add(n));
        renderChampModal(champModalSearchEl.value);
        render();
      };

      champsFiltered.forEach(name => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "champ-btn" + (selected.has(name) ? " selected" : "");
        btn.textContent = name;
        btn.onclick = () => {
          if (selected.has(name)) selected.delete(name);
          else selected.add(name);
          renderChampModal(champModalSearchEl.value);
          render();
        };
        body.appendChild(btn);
      });

      col.appendChild(head);
      col.appendChild(body);
      champModalGridEl.appendChild(col);
    });
  }

  // close handlers
  champModalXEl.addEventListener("click", closeChampModal);
  champModalBackdropEl.addEventListener("click", closeChampModal);
  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && !champModalEl.classList.contains("hidden")) closeChampModal();
  });

  champModalSearchEl.addEventListener("input", () => {
    renderChampModal(champModalSearchEl.value);
  });

  champModalSelectAllEl.addEventListener("click", () => {
    selected = new Set(raw.map(r => r.champion));
    renderChampModal(champModalSearchEl.value);
    render();
  });

  champModalClearAllEl.addEventListener("click", () => {
    selected = new Set();
    renderChampModal(champModalSearchEl.value);
    render();
  });

  async function init(){
    const res = await fetch(TSV_URL);
    const text = await res.text();
    const rows = parseTSV(text);

    raw = rows
      .filter(x => x["Champion"])
      .map(x => ({
        champion: x["Champion"],
        ad_base: toNum(x["AD_Base"]),       ad_growth: toNum(x["AD_Growth"]),
        hp_base: toNum(x["HP_Base"]),       hp_growth: toNum(x["HP_Growth"]),
        mana_base: toNum(x["Mana_Base"]),   mana_growth: toNum(x["Mana_Growth"]),
        armor_base: toNum(x["Armor_Base"]), armor_growth: toNum(x["Armor_Growth"]),
        mr_base: toNum(x["MR_Base"]),       mr_growth: toNum(x["MR_Growth"]),
        resource: (x["Resource"] || "Mana").trim(),
        roles: {
          Top: toNum(x["Is_Top"]) === 1,
          Jungle: toNum(x["Is_Jungle"]) === 1,
          Mid: toNum(x["Is_Mid"]) === 1,
          ADC: toNum(x["Is_Adc"]) === 1,
          Support: toNum(x["Is_Support"]) === 1,
        }
      }));

    selected = new Set(raw.map(r => r.champion));

    levelEl.addEventListener("input", () => {
      level = Number(levelEl.value);
      levelValEl.textContent = String(level);
      render();
    });

    levelValEl.textContent = String(level);
    render();
  }

  init();
</script>
</body>
</html>
