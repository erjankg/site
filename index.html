<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wild Rift ‚Äì ADC Stats</title>
  <style>
    :root { font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
    body { margin:0; background:#0b0f17; color:#e8edf7; }
    .wrap { max-width:1200px; margin:0 auto; padding:16px; }
    h1 { margin:0 0 12px; font-size:20px; }
    .panel { display:grid; gap:12px; grid-template-columns: 1.2fr 1.8fr 1fr; }
    .card { background:#121a2a; border:1px solid #22304a; border-radius:10px; padding:12px; }
    label { display:block; font-size:12px; opacity:.9; margin-bottom:8px; }
    input[type="range"] { width:100%; }
    input[type="text"] { width:100%; padding:8px 10px; border-radius:8px; border:1px solid #22304a; background:#0b0f17; color:#e8edf7; }
    .small { font-size:12px; opacity:.75; margin-top:6px; }
    .tableWrap { margin-top:12px; overflow:auto; border-radius:10px; border:1px solid #22304a; }
    table { width:100%; border-collapse:collapse; }
    th, td { padding:10px; border-bottom:1px solid #22304a; white-space:nowrap; }
    th { position:sticky; top:0; background:#121a2a; cursor:pointer; user-select:none; }
    tr:hover td { background:#0f1524; }
    .chips { display:flex; flex-wrap:wrap; gap:8px; max-height:120px; overflow:auto; padding-right:4px; }
    .chip { display:inline-flex; align-items:center; gap:6px; padding:6px 8px; border:1px solid #22304a; border-radius:999px; background:#0b0f17; font-size:12px; }
    .chip input { transform: translateY(1px); }
    @media (max-width: 900px) { .panel { grid-template-columns:1fr; } }
 
/* Tier colors (Top 10% / Mid / Bottom 10%) */
.tier-top {
  background: #7b5cff !important; /* purple */
  color: #ffffff;
}

.tier-mid {
  background: rgba(138, 147, 166, 0.12) !important; /* neutral mid */
  color: #e8edf7;
}

.tier-low {
  background: rgba(255, 77, 79, 0.18) !important; /* red bottom */
  color: #ffffff;
}

/* Mana = 0 (no resource) */

/* Zero Mana (animated, cold, disabled feeling) */
.mana-zero {
  position: relative;
  background: rgba(90, 100, 120, 0.25) !important;
  color: #cfd6e4;
  font-weight: 800;
  text-align: center;
  overflow: hidden;
}

/* —Ö–æ–ª–æ–¥–Ω–∞—è ¬´–ø—É–ª—å—Å–∞—Ü–∏—è –ø—É—Å—Ç–æ—Ç—ã¬ª */
.mana-zero::after {
  content: "";
  position: absolute;
  inset: -60%;
  background: radial-gradient(
    circle,
    rgba(142, 177, 248, 0.35),
    rgba(67, 74, 87, 0.299)
  );
  animation: zeroPulse 3.2s ease-in-out infinite;
}

.mana-zero > span {
  position: relative;
  z-index: 1;
}

@keyframes zeroPulse {
  0%   { transform: scale(0.9);  opacity: 0.35; }
  50%  { transform: scale(1.05); opacity: 0.65; }
  100% { transform: scale(0.9);  opacity: 0.35; }
}

/* Energy cell */
.energy {
  position: relative;
  background: rgba(255, 159, 28, 0.22) !important;
  color: #0b0f17;
  font-weight: 900;
  text-align: center;
  letter-spacing: 0.6px;
  overflow: hidden;
}
.energy::after{
  content:"";
  position:absolute;
  inset:-40%;
  background: radial-gradient(circle, rgba(255,159,28,0.55), rgba(255,159,28,0));
  animation: energyPulse 1.6s ease-in-out infinite;
}
.energy > span{
  position: relative;
  z-index: 1;
}
@keyframes energyPulse{
  0%   { transform: scale(0.85); opacity: 0.55; }
  50%  { transform: scale(1.15); opacity: 0.95; }
  100% { transform: scale(0.85); opacity: 0.55; }
}

.brand {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 8px;
}

.nick {
  font-size: 22px;
  font-weight: 700;
  letter-spacing: 1px;
  color: #7b5cff;
  animation: glow 2.5s ease-in-out infinite;
}

.tag {
  font-size: 12px;
  opacity: 0.7;
  border-left: 1px solid #22304a;
  padding-left: 12px;
}

@keyframes glow {
  0%   { text-shadow: 0 0 4px #7b5cff44; }
  50%  { text-shadow: 0 0 12px #7b5cffcc; }
  100% { text-shadow: 0 0 4px #7b5cff44; }
}
.dot {
  opacity: 0.6;
}

.twitch {
  font-size: 14px;
  font-weight: 600;
  color: #9146ff; /* —Ñ–∏—Ä–º–µ–Ω–Ω—ã–π Tw342323423443itch */
  animation: pulse 3s ease-in-out infinite;
}

@keyframes pulse {
  0%   { opacity: 0.6; }
  50%  { opacity: 1; }
  100% { opacity: 0.6; }
}
.twitch {
  font-size: 14px;
  font-weight: 600;
  color: #9146ff;
  text-decoration: none; /* —É–±–∏—Ä–∞–µ–º –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ */
  animation: pulse 3s ease-in-out infinite;
}

.twitch:hover {
  text-decoration: underline;
  opacity: 1;
}

.support{
  margin-top: 14px;
  padding: 14px;
  border: 1px solid #22304a;
  border-radius: 12px;
  background: #121a2a;
  display: grid;
  gap: 12px;
}

.supportTitle{
  font-weight: 700;
  letter-spacing: .4px;
  margin-bottom: 6px;
}

.supportBody{
  font-size: 13px;
  line-height: 1.4;
  opacity: .9;
}

.donateBtn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 12px;
  text-decoration: none;
  color: #ffffff;
  background: linear-gradient(90deg, #9146ff, #7b5cff);
  border: 1px solid #2a3a5a;
  font-weight: 700;
  letter-spacing: .2px;
  position: relative;
  overflow: hidden;
  animation: donatePulse 2.2s ease-in-out infinite;
}

.donateBtn::before{
  content: "";
  position: absolute;
  top: -40%;
  left: -60%;
  width: 60%;
  height: 180%;
  background: rgba(255,255,255,.22);
  transform: rotate(20deg);
  animation: donateShine 2.8s ease-in-out infinite;
}

@keyframes donatePulse{
  0%   { box-shadow: 0 0 0 rgba(145,70,255,0.0); }
  50%  { box-shadow: 0 0 18px rgba(145,70,255,0.35); }
  100% { box-shadow: 0 0 0 rgba(145,70,255,0.0); }
}

@keyframes donateShine{
  0%   { transform: translateX(-120%) rotate(20deg); opacity: 0; }
  15%  { opacity: 1; }
  45%  { transform: translateX(220%) rotate(20deg); opacity: 0; }
  100% { transform: translateX(220%) rotate(20deg); opacity: 0; }
}


/* Hover: —á—É—Ç—å —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–æ–Ω—Ç—Ä–∞—Å—Ç —Ç–µ–∫—Å—Ç–∞ */
tbody tr:hover td {
  color: #ffffff;
  font-weight: 600;
}

/* Hover: –ª—ë–≥–∫–∞—è ‚Äú—Ä–∞–º–∫–∞‚Äù –≤–æ–∫—Ä—É–≥ —Å—Ç—Ä–æ–∫–∏ */
tbody tr:hover {
  outline: 1px solid #2f4166;
  outline-offset: -1px;
}
/* Hover: –≤—Å—è —Å—Ç—Ä–æ–∫–∞ ‚Äî —Ç—ë–ø–ª—ã–π –∫—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω */
tbody tr:hover {
  background: rgba(180, 60, 60, 0.12);
  box-shadow: inset 0 0 0 2px rgba(200, 70, 70, 0.6);
}

/* Hover: –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚Äî —Ç—ë–ø–ª—ã–π –∫—Ä–∞—Å–Ω—ã–π */
tbody tr:hover td {
  color: #ffffff;
  font-weight: 900;
}

/* Hover: –∏–º—è —á–µ–º–ø–∏–æ–Ω–∞ ‚Äî –µ—â—ë —è—Ä—á–µ */
tbody tr:hover td:first-child {
  color: #ff6b6b;
  font-weight: 800;
}


.levelBar{
  margin-top: 12px;
  margin-bottom: 12px;
  padding: 12px;
  background: #121a2a;
  border: 1px solid #22304a;
  border-radius: 12px;
}

.levelHead{
  display:flex;
  align-items:center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.levelTitle{
  font-size: 12px;
  opacity: 0.85;
}

.levelNum{
  font-size: 12px;
  opacity: 0.9;
  font-weight: 700;
}

#level{
  width: 100%;
}
.role-icon {
  width: 30px;
  height: 30px;
  object-fit: contain;
}
.chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}
/* Tooltip */
td.has-tip {
  position: relative;
}

td.has-tip::after {
  content: attr(data-tip);
  position: absolute;
  left: 50%;
  bottom: calc(100% + 8px);
  transform: translateX(-50%);
  background: rgba(15, 21, 36, 0.96);
  border: 1px solid #22304a;
  color: #d6deee;

  padding: 6px 8px;
  border-radius: 8px;

  font-size: 11px;          /* ‚¨Ö –º–µ–Ω—å—à–µ */
  font-weight: 400;         /* ‚¨Ö –ù–ï –∂–∏—Ä–Ω—ã–π */
  letter-spacing: 0.2px;    /* ‚¨Ö –∞–∫–∫—É—Ä–∞—Ç–Ω–æ */
  line-height: 1.35;

  white-space: nowrap;
  pointer-events: none;
  opacity: 0;
  transition: opacity 120ms ease, transform 120ms ease;
  z-index: 50;
}

td.has-tip::before {
  content: "";
  position: absolute;
  left: 50%;
  bottom: calc(100% + 2px);
  transform: translateX(-50%);
  border: 6px solid transparent;
  border-top-color: #22304a;
  opacity: 0;
  transition: opacity 120ms ease;
  z-index: 50;
}

td.has-tip:hover::after,
td.has-tip:hover::before {
  opacity: 1;
}

td.has-tip:hover::after {
  transform: translateX(-50%) translateY(-2px);
}
/* --- table cell separators (minimal grid) --- */
th, td {
  border-right: 1px solid rgba(34, 48, 74, 0.55);
}
th:last-child, td:last-child {
  border-right: none;
}

/* —á—É—Ç—å –≤–∏–¥–Ω–µ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ (—É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å border-bottom, —É—Å–∏–ª–∏–º —á—É—Ç—å) */
tbody td {
  border-bottom: 1px solid rgba(34, 48, 74, 0.65);
}

/* --- champion cell with X button --- */
.champ-cell{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  width: 100%;
}

.champ-name{
  display: inline-block;
  max-width: 220px;
  overflow: hidden;
  text-overflow: ellipsis;
}

.champ-x{
  width: 22px;
  height: 22px;
  border-radius: 8px;
  border: 1px solid rgba(34, 48, 74, 0.9);
  background: rgba(11, 15, 23, 0.55);
  color: rgba(232, 237, 247, 0.85);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
  font-weight: 700;
  transition: transform 120ms ease, opacity 120ms ease, border-color 120ms ease;
}

.champ-x:hover{
  transform: scale(1.05);
  border-color: rgba(255, 107, 107, 0.75);
  color: #ff6b6b;
}

/* --- header actions (Select all / Clear) --- */
.th-actions{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
}

.th-actions .mini-btn{
  padding: 4px 8px;
  border-radius: 10px;
  border: 1px solid rgba(34, 48, 74, 0.9);
  background: rgba(11, 15, 23, 0.55);
  color: rgba(232, 237, 247, 0.9);
  cursor:pointer;
  font-size: 11px;
  font-weight: 700;
}

.th-actions .mini-btn:hover{
  border-color: rgba(123, 92, 255, 0.75);
  color: #ffffff;
}

/* Tooltip –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞ energy-—è—á–µ–π–∫–∞—Ö */
td.energy.has-tip::after,
td.energy.has-tip::before {
  display: none !important;
}
/* üîí –ñ—ë—Å—Ç–∫–æ–µ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–π —Ç–∞–±–ª–∏—Ü—ã */
table thead th,
table tbody td {
  text-align: center !important;
  vertical-align: middle;
}
/* Champion ‚Äî —Ç–æ–∂–µ –ø–æ —Ü–µ–Ω—Ç—Ä—É */
table thead th:first-child,
table tbody td:first-child {
  text-align: center !important;
}
/* Mobile: keep TABLE layout, just make it smaller */
@media (max-width: 600px) {
  .wrap { padding: 8px; }

  /* panel/cards smaller */
  .card { padding: 10px; }
  h1 { font-size: 16px; }

  /* chips smaller */
  .chip { padding: 4px 6px; font-size: 11px; }
  .role-icon { width: 22px; height: 22px; }

  /* TABLE stays table, just compact */
  .tableWrap { overflow-x: auto; -webkit-overflow-scrolling: touch; }
  table { font-size: 11px; }
  th, td { padding: 6px 8px; }

  /* make champion column narrower */
  thead th:first-child,
  tbody td:first-child { min-width: 90px; }

  .champ-name { max-width: 70px; }  /* –µ—Å–ª–∏ —É —Ç–µ–±—è –µ—Å—Ç—å .champ-name */
}

/* ===== Champion Modal ===== */
.modal.hidden { display: none; }

.modal {
  position: fixed;
  inset: 0;
  z-index: 9999;
}

.modal-backdrop{
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,.55);
  backdrop-filter: blur(2px);
}

.modal-card{
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: min(1100px, 92vw);
  height: min(80vh, 720px);
  background: #121a2a;
  border: 1px solid #22304a;
  border-radius: 14px;
  box-shadow: 0 20px 60px rgba(0,0,0,.5);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.modal-head{
  padding: 10px 12px;
  border-bottom: 1px solid #22304a;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.modal-title{
  font-weight: 800;
  letter-spacing: .3px;
}

.modal-actions{
  display:flex;
  align-items:center;
  gap: 8px;
}

.modal-search{
  width: 220px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid #22304a;
  background:#0b0f17;
  color:#e8edf7;
}

.modal-grid{
  padding: 12px;
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 10px;
  overflow: auto;
}

/* role column */
.role-col{
  border: 1px solid rgba(34,48,74,.75);
  border-radius: 12px;
  background: rgba(11,15,23,.35);
  overflow: hidden;
  display:flex;
  flex-direction: column;
  min-width: 0;
}

.role-head{
  display:flex;
  align-items:center;
  justify-content:center;
  gap: 8px;
  padding: 10px 8px;
  border-bottom: 1px solid rgba(34,48,74,.65);
  background: rgba(18,26,42,.85);
  font-weight: 800;
}

.role-head img{
  width: 26px;
  height: 26px;
  object-fit: contain;
}

.role-body{
  padding: 10px;
  display:flex;
  flex-direction: column;
  gap: 8px;
  overflow: auto;
}

.champ-btn{
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid rgba(34,48,74,.8);
  background: rgba(11,15,23,.65);
  color: rgba(232,237,247,.92);
  cursor: pointer;
  text-align: center;
  font-weight: 700;
  transition: transform 120ms ease, border-color 120ms ease, background 120ms ease;
}

.champ-btn:hover{
  transform: translateY(-1px);
  border-color: rgba(123,92,255,.7);
}

/* Selected champion */
.champ-btn.selected{
  background: rgba(123,92,255,.25);
  border-color: rgba(123,92,255,.85);
  color: #ffffff;
}

/* Mobile: modal becomes 1 column */
@media (max-width: 700px){
  .modal-grid{ grid-template-columns: 1fr; }
  .modal-search{ width: 140px; }
}

  </style>
<!-- Cloudflare Web Analytics–π fgdgggjhjhgggggfgtrrtrtr-->
<script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "6daed475e9834e95aba528b80cdffe55"}'></script><!-- End Cloudflare Web Analytics -->


</head>
<body>
<div class="wrap">
 <div class="brand">
  <span class="nick">ERjanKG</span>
  <span class="dot">¬∑</span>
  <a class="twitch" href="https://www.twitch.tv/ERjanKG" target="_blank" rel="noopener">
    Twitch
  </a>
  <span class="tag">Wild Rift Stats</span>
</div>
<div class="support">
  <div class="supportText">
    <div class="supportBody">
      –†–µ–±—è—Ç–∞, —Å–∞–π—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ –±–µ—Å–ø–ª–∞—Ç–µ–Ω –¥–ª—è –≤—Å–µ—Ö.
      –ù–æ –±—É–¥—É –æ—á–µ–Ω—å –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É, –¥–ª—è –º–µ–Ω—è —ç—Ç–æ –º–æ—â–Ω–∞—è –º–æ—Ç–∏–≤–∞—Ü–∏—è —Ä–∞–∑–≤–∏–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç.
      –í –ø–ª–∞–Ω–∞—Ö –¥–æ–±–∞–≤–∏—Ç—å  –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ–º–ø–æ–≤, winrate\pickrate –∏ —Ç–∞–±–ª–∏—Ü—É –≥–∞–Ω–≥ –ø–æ—Ç–µ–Ω—Ü–∞–∏–ª –ª–µ—Å–Ω–∏–∫–æ–≤, —Ö–ø —Ä–µ–≥–µ–Ω –º–∞–Ω–∞ —Ä–µ–≥–µ–Ω, —Ñ—É–ª–ª–∫–ª–∏—Ä —á–∏—Å—Ç–∫–∞ —Ç–∞–π–º–µ—Ä —É –ª–µ—Å–Ω–∏–∫–æ–≤ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å–∞–π—Ç –¥–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏.
    </div>
  </div>

  <a class="donateBtn"
     href="https://www.donationalerts.com/r/erjankg"
     target="_blank"
     rel="noopener">
    üíú –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
  </a>
</div>





  <h1>Champion Stats (by Level)</h1>


  <div class="panel">
   




  
<div class="card">
  <label>Roles</label>
  <div id="roleFilters" class="chips"></div>
  <div class="small">–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–æ–ª–µ–π</div>
</div>


    <div class="card">
      <label for="search">Search</label>
      <input id="search" type="text" placeholder="Type champion name‚Ä¶" />
      <div class="small">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –∫–ª–∏–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É –∫–æ–ª–æ–Ω–∫–∏.</div>
    </div>
  
  
  </div>

<div class="levelBar">
  <div class="levelHead">
    <div class="levelTitle">Level</div>
    <div class="levelNum"><span id="levelVal">10</span>/15</div>
  </div>

  <input id="level" type="range" min="1" max="15" value="10" />
</div>



  <div class="tableWrap">
    <table>
      <thead id="thead"></thead>
      <tbody id="tbody"></tbody>
    </table>
  </div>

  <div class="small" style="margin-top:10px;">
    Data source: Google Sheets (published TSV)
  </div>
</div>

<!-- Champion picker modal -->
<div id="champModal" class="modal hidden" aria-hidden="true">
  <div class="modal-backdrop" id="champModalBackdrop"></div>

  <div class="modal-card" role="dialog" aria-modal="true">
    <div class="modal-head">
      <div class="modal-title">Choose Champions</div>

      <div class="modal-actions">
        <input id="champModalSearch" class="modal-search" type="text" placeholder="Search champion..." />
        <button id="champModalSelectAll" class="mini-btn" type="button">Select all</button>
        <button id="champModalClearAll" class="mini-btn" type="button">Clear all</button>
        <button id="champModalClose" class="mini-btn" type="button">Close</button>
      </div>
    </div>

    <div id="champModalGrid" class="modal-grid"></div>
  </div>
</div>


<script>
  // 1)w –í–°–¢–ê–í–¨ –°–Æ–î–ê –°–í–û–Æ C123SV-–°–´–õ–ö–£ –ò–ó "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ"
  const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQnqVwUluQiuho1Wj6A3tZRvDJsLlyAZYmg0soWy4EJ_Un00P8e3Y2EAo3Iv6KvMm5HPwce_0AnzPfb/pub?gid=0&single=true&output=tsv";



  // –ö–∞–∫–∏–µ —Å—Ç–∞—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–µ–π—á–∞—Å
  const COLS = [
    { key: "ad",    label: "AD",    decimals: 0 },
    { key: "hp",    label: "HP",    decimals: 0 },
    { key: "mana",  label: "Mana",  decimals: 0 },
    { key: "armor", label: "Armor", decimals: 0 },
    { key: "mr",    label: "MR",    decimals: 0 },
  ];

  let raw = [];                 // { champion, ad_base, ad_growth, ... }
  let selected = new Set();     // –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —á–µ–º–ø—ã
  let roles = new Set(); // –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ä–æ–ª–∏
  let level = 10;
  let sortKey = "ad";
  let sortDir = "desc";
  let search = "";

  const levelEl = document.getElementById("level");
  const levelValEl = document.getElementById("levelVal");
  const chipsEl = document.getElementById("champChips");
  const theadEl = document.getElementById("thead");
  const tbodyEl = document.getElementById("tbody");
  const searchEl = document.getElementById("search");

  function calc(base, growth, lvl) {
    return base + (lvl - 1) * growth;
  }

  function fmt(x, decimals) {
    return x.toLocaleString(undefined, { maximumFractionDigits: decimals });
  }

  // CSV –ø–∞—Ä—Å–µ—Ä (–ø—Ä–æ—Å—Ç–æ–π, –ø–æ–¥ –æ–±—ã—á–Ω—ã–π CSV –±–µ–∑ —Å–ª–æ–∂–Ω—ã—Ö –∫–∞–≤—ã—á–µ–∫)
 function parseTSV(text) {
  const lines = text.trim().split(/\r?\n/);
  const headers = lines[0].split("\t").map(s => s.trim());
  const rows = [];
  for (let i = 1; i < lines.length; i++) {
    const parts = lines[i].split("\t").map(s => s.trim());
    const obj = {};
    headers.forEach((h, idx) => obj[h] = parts[idx] ?? "");
    rows.push(obj);
  }
  return rows;
}

function quantile(sortedArr, q) {
  if (!sortedArr.length) return null;
  const pos = (sortedArr.length - 1) * q;
  const base = Math.floor(pos);
  const rest = pos - base;
  if (sortedArr[base + 1] === undefined) return sortedArr[base];
  return sortedArr[base] + rest * (sortedArr[base + 1] - sortedArr[base]);
}

  function toNum(s) {
    // –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–ø—è—Ç–æ–π –∫–∞–∫ –¥–µ—Å—è—Ç–∏—á–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è
    const t = String(s).replace(/\s/g, "").replace(",", ".");
    const n = Number(t);
    return Number.isFinite(n) ? n : 0;
  }

  function buildChips() {
    chipsEl.innerHTML = "";
    raw.forEach(r => {
      const label = document.createElement("label");
      label.className = "chip";
      const cb = document.createElement("input");
      cb.type = "checkbox";
      cb.checked = selected.has(r.champion);
      cb.addEventListener("change", () => {
        if (cb.checked) selected.add(r.champion);
        else selected.delete(r.champion);
       
        render();
      });
      const txt = document.createElement("span");
      txt.textContent = r.champion;
      label.appendChild(cb);
      label.appendChild(txt);
      chipsEl.appendChild(label);
    });
  }
  function buildRoleFilters() {
  const rolesList = [
    { key: "Top", icon: "assets/roles/top.png" },
    { key: "Jungle", icon: "assets/roles/jungle.png" },
    { key: "Mid", icon: "assets/roles/mid.png" },
    { key: "ADC", icon: "assets/roles/adc.png" },
    { key: "Support", icon: "assets/roles/support.png" },
  ];

  const el = document.getElementById("roleFilters");
  el.innerHTML = "";

  rolesList.forEach(r => {
    const label = document.createElement("label");
    label.className = "chip";

    const cb = document.createElement("input");
    cb.type = "checkbox";
    cb.checked = roles.has(r.key);

    cb.addEventListener("change", () => {
      if (cb.checked) roles.add(r.key);
      else roles.delete(r.key);
      render();
    });

    const img = document.createElement("img");
    img.src = r.icon;
    img.alt = r.key;
    img.className = "role-icon";

    const text = document.createElement("span");
    text.textContent = r.key;

    label.appendChild(cb);
    label.appendChild(img);
    label.appendChild(text);
    el.appendChild(label);
  });
}



  function buildHeader() {
    const tr = document.createElement("tr");

 const thC = document.createElement("th");
thC.textContent = "Champion";
thC.style.cursor = "pointer";
thC.onclick = () => openChampModal();
tr.appendChild(thC);



    COLS.forEach(c => {
      const th = document.createElement("th");
      th.textContent = c.label + (sortKey === c.key ? (sortDir==="desc"?" ‚Üì":" ‚Üë") : "");
      th.onclick = () => toggleSort(c.key);
      tr.appendChild(th);
    });

    theadEl.innerHTML = "";
    theadEl.appendChild(tr);
  }
function openChampModal(){
  champModalEl.classList.remove("hidden");
  champModalEl.setAttribute("aria-hidden", "false");
  champModalSearch.value = "";
  renderChampModal();
  setTimeout(() => champModalSearch.focus(), 0);
}

function closeChampModal(){
  champModalEl.classList.add("hidden");
  champModalEl.setAttribute("aria-hidden", "true");
}

function renderChampModal(){
  const q = champModalSearch.value.trim().toLowerCase();

  const rolesList = [
    { key: "Top",     label: "Top",     icon: "assets/roles/top.png" },
    { key: "Jungle",  label: "Jungle",  icon: "assets/roles/jungle.png" },
    { key: "Mid",     label: "Mid",     icon: "assets/roles/mid.png" },
    { key: "ADC",     label: "ADC",     icon: "assets/roles/adc.png" },
    { key: "Support", label: "Support", icon: "assets/roles/support.png" },
  ];

  champModalGridEl.innerHTML = "";

  rolesList.forEach(role => {
    const col = document.createElement("div");
    col.className = "role-col";

    const head = document.createElement("div");
    head.className = "role-head";

    const img = document.createElement("img");
    img.src = role.icon;
    img.alt = role.label;

    const title = document.createElement("span");
    title.textContent = role.label;

    head.appendChild(img);
    head.appendChild(title);

    const body = document.createElement("div");
    body.className = "role-body";

    const champs = raw
      .filter(r => r.roles?.[role.key])
      .map(r => r.champion)
      .filter(name => name.toLowerCase().includes(q))
      .sort((a,b) => a.localeCompare(b)); // –∞–ª—Ñ–∞–≤–∏—Ç

    champs.forEach(name => {
      const btn = document.createElement("button");
      btn.type = "button";
      btn.className = "champ-btn" + (selected.has(name) ? " selected" : "");
      btn.textContent = name;

      btn.onclick = () => {
        if (selected.has(name)) selected.delete(name);
        else selected.add(name);
        renderChampModal(); // –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö
        render();          // –æ–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É
      };

      body.appendChild(btn);
    });

    col.appendChild(head);
    col.appendChild(body);
    champModalGridEl.appendChild(col);
  });
}


  function toggleSort(key) {
    if (sortKey === key) sortDir = (sortDir === "desc") ? "asc" : "desc";
    else { sortKey = key; sortDir = "desc"; }
    render();
  }

  function computeRows() {
  const list = raw
    // 1) –§–ò–õ–¨–¢–† –ü–û –†–û–õ–Ø–ú
    .filter(r => {
      if (roles.size === 0) return true; // –µ—Å–ª–∏ —Ä–æ–ª–∏ –Ω–µ –≤—ã–±—Ä–∞–Ω—ã ‚Äî –≤—Å–µ
      return [...roles].some(role => r.roles[role]);
    })

    // 2) –§–ò–õ–¨–¢–† –ü–û –í–´–ë–†–ê–ù–ù–´–ú –ß–ï–ú–ü–ò–û–ù–ê–ú
    .filter(r => selected.has(r.champion))

    // 3) –ü–û–ò–°–ö
    .filter(r => r.champion.toLowerCase().includes(search))

    // 4) –†–ê–°–ß–Å–¢ –°–¢–ê–¢–û–í
    .map(r => {
     const out = { champion: r.champion, resource: r.resource, growth: {} };
COLS.forEach(c => {
  out[c.key] = calc(r[c.key + "_base"], r[c.key + "_growth"], level);
  out.growth[c.key] = r[c.key + "_growth"];
});
return out;

    });

  // ‚ö†Ô∏è –°–û–†–¢–ò–†–û–í–ö–£ –ù–ï –¢–†–û–ì–ê–ï–ú
  list.sort((a, b) => {
    const dir = sortDir === "desc" ? -1 : 1;

    if (sortKey === "champion") {
      return a.champion.localeCompare(b.champion) * dir;
    }

    const av = a[sortKey];
    const bv = b[sortKey];

    if (av === bv) {
      return a.champion.localeCompare(b.champion);
    }

    return (av < bv ? -1 : 1) * dir;
  });

  return list;
}


  function renderBody(rows) {
  const thresholds = {};
  for (const c of COLS) {
    const vals = rows
  .map(r => r[c.key])
  .filter(v => Number.isFinite(v))
  .filter(v => (c.key === "mana" ? v !== 0 : true))
  .sort((a, b) => a - b);


    if (vals.length < 3) continue;
   thresholds[c.key] = {
  q10: quantile(vals, 0.1),
  q90: quantile(vals, 0.9)
};

  }

  tbodyEl.innerHTML = "";
  rows.forEach(r => {
    const tr = document.createElement("tr");

    const tdC = document.createElement("td");

const wrap = document.createElement("div");
wrap.className = "champ-cell";

const name = document.createElement("span");
name.className = "champ-name";
name.textContent = r.champion;

const xbtn = document.createElement("button");
xbtn.className = "champ-x";
xbtn.type = "button";
xbtn.textContent = "√ó";
xbtn.title = "Remove champion";
xbtn.onclick = (e) => {
  e.stopPropagation();
  selected.delete(r.champion); // —É–±—Ä–∞—Ç—å –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö
  render();
};

wrap.appendChild(name);
wrap.appendChild(xbtn);

tdC.appendChild(wrap);
tr.appendChild(tdC);


    COLS.forEach(c => {
  const td = document.createElement("td");
  const val = r[c.key];

  // --- SPECIAL CASES FIRST ---
  // ENERGY: show label instead of number
  if (c.key === "mana" && r.resource === "Energy") {
    td.innerHTML = "<span>ENERGY</span>";
    td.classList.add("energy");
    tr.appendChild(td);
    return;
  }

  // Mana=0: gray (animated) and not tier-colored, not tooltip
  if (c.key === "mana" && val === 0) {
    td.innerHTML = "<span>0</span>";
    td.classList.add("mana-zero");
    tr.appendChild(td);
    return;
  }

  // --- NORMAL CELL ---
  td.textContent = fmt(val, c.decimals);

  // Tooltip: "<STAT> growth per lvl: X"
  td.classList.add("has-tip");
  td.dataset.tip = `${c.label} growth per lvl: ${r.growth[c.key]}`;

  // Tier colors (10/80/10)
  const t = thresholds[c.key];
  if (t && Number.isFinite(val)) {
    if (val >= t.q90) td.classList.add("tier-top");
    else if (val < t.q10) td.classList.add("tier-low");
    else td.classList.add("tier-mid");
  }

  tr.appendChild(td);
});


    tbodyEl.appendChild(tr);
  });
}


  function render() {
    buildHeader();
    const rows = computeRows();
    renderBody(rows);
  }

  async function init() {
    if (CSV_URL.includes("PASTE_YOUR")) {
      alert("–í—Å—Ç–∞–≤—å CSV —Å—Å—ã–ª–∫—É –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é CSV_URL –≤ index.html");
      return;
    }

    const res = await fetch(CSV_URL);
    const text = await res.text();
    const rows = parseTSV(text);


    // –û–∂–∏–¥–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∫–∞–∫ –≤ —Ç–≤–æ—ë–º DATA:
    // Champion, AD_Base, AD_Growth, HP_Base, HP_Growth, Mana_Base, Mana_Growth, Armor_Base, Armor_Growth, MR_Base, MR_Growth
    raw = rows
      .filter(x => x["Champion"])
      .map(x => ({
        champion: x["Champion"],
        ad_base: toNum(x["AD_Base"]),       ad_growth: toNum(x["AD_Growth"]),
        hp_base: toNum(x["HP_Base"]),       hp_growth: toNum(x["HP_Growth"]),
        mana_base: toNum(x["Mana_Base"]),   mana_growth: toNum(x["Mana_Growth"]),
        armor_base: toNum(x["Armor_Base"]), armor_growth: toNum(x["Armor_Growth"]),
        mr_base: toNum(x["MR_Base"]),       mr_growth: toNum(x["MR_Growth"]),
        resource: (x["Resource"] || "Mana").trim(),
        roles: {
      Top: toNum(x["Is_Top"]) === 1,
      Jungle: toNum(x["Is_Jungle"]) === 1,
      Mid: toNum(x["Is_Mid"]) === 1,
      ADC: toNum(x["Is_Adc"]) === 1,
      Support: toNum(x["Is_Support"]) === 1,
    }

      }));

    // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–±–∏—Ä–∞–µ–º –≤—Å–µ—Ö
    selected = new Set(raw.map(r => r.champion));

   
    buildRoleFilters();
    buildHeader();

    levelEl.addEventListener("input", () => {
      level = Number(levelEl.value);
      levelValEl.textContent = String(level);

      render();
    });

    searchEl.addEventListener("input", () => {
      search = searchEl.value.trim().toLowerCase();
      render();
    });

    levelValEl.textContent = String(level);
    // modal events
champModalBackdrop.addEventListener("click", closeChampModal);
champModalClose.addEventListener("click", closeChampModal);

champModalSelectAll.addEventListener("click", () => {
  selected = new Set(raw.map(r => r.champion));
  renderChampModal();
  render();
});

champModalClearAll.addEventListener("click", () => {
  selected = new Set();
  renderChampModal();
  render();
});

champModalSearch.addEventListener("input", () => {
  renderChampModal();
});

// Esc close
document.addEventListener("keydown", (e) => {
  if (e.key === "Escape" && !champModalEl.classList.contains("hidden")) {
    closeChampModal();
  }
});

    render();
  }

  init();
</script>
</body>
</html>
